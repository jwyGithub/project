"use strict";var _createClass=function(){function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}define(function(){function e(){_classCallCheck(this,e),this.login=document.getElementById("login"),this.reg=document.getElementById("reg"),this.con=document.querySelector(".contribute"),this.hot=document.querySelector(".wrapper-a"),this.onefr=document.querySelector(".oneFright"),this.twofr=document.querySelector(".twoFright"),this.threefr=document.querySelector(".threeFright"),this.fourfr=document.querySelector(".fourFright"),this.search=document.getElementById("search"),this.keyword=document.getElementById("keyword"),this.list=document.querySelectorAll(".list");var t=document.querySelectorAll("img[lazySrc]");this.aA=document.querySelectorAll("a"),this.clientH=document.documentElement.clientHeight,this.logout=document.getElementById("logout"),this.wel=document.querySelector(".wel"),this.arr=Array.from(t),this.init()}function l(t,e,r){var i=(r=r||{}).path?";path="+r.path:"",n="";if(r.expires){var o=new Date;o.setDate(o.getDate()+r.expires),n=";expires="+o}document.cookie=t+"="+e+n+i}function h(t,e){l(t,null,{expires:-1,path:(e=e||{}).path})}return _createClass(e,[{key:"init",value:function(){var e=this,r=this;this.login.onclick=function(){location.href="http://localhost/login/login.html"},this.reg.onclick=function(){location.href="http://localhost/reg/reg.html"},this.search.onclick=function(){r.keywordV=e.keyword.value,r.setCookie()},this.logout.onclick=function(){h("user",{path:"/"}),h("details",{path:"/"}),h("goodsId",{path:"/"}),h("keyword",{path:"/"}),location.href="http://localhost/login/login.html"};for(var t=function(t){$(e.list[t]).hover(function(){$(r.list[t]).children(".items").show()},function(){$(r.list[t]).children(".items").hide()})},i=0;i<this.list.length;i++)t(i);for(var n=$(".seaKeyword").find("dd").find("a"),o=function(t){n[t].onclick=function(){l("keyword",n[t].innerHTML,{path:"/"}),location.href="http://localhost/list/list.html"}},s=0;s<n.length;s++)o(s);$(".linkfloor li").click(function(){var t=$(this).index(),e=$(".floorstyle").eq(t).offset().top;$("html").animate({scrollTop:e})}),this.userInfo(),this.lazyLoad(),this.load(),this.scroll()}},{key:"scroll",value:function(){var t=this;onscroll=function(){t.lazyLoad()}}},{key:"lazyLoad",value:function(){for(var t=document.documentElement.scrollTop,e=0;e<this.arr.length;e++)this.arr[e].offsetTop-this.clientH<t&&(this.arr[e].src=this.arr[e].getAttribute("lazySrc"),this.arr.splice(e,1),e--)}},{key:"userInfo",value:function(){this.user=function(t){for(var e=document.cookie.split("; "),r=0;r<e.length;r++)if(e[r].split("=")[0]==t)return e[r].split("=")[1];return""}("user"),this.wel.innerHTML="杂志网欢迎"+this.user,this.user?($(".top2").show(),$(".top").hide()):($(".top2").hide(),$(".top").show())}},{key:"load",value:function(){var e=this;$.ajax({url:"http://localhost:81/common/index",success:function(t){e.res=JSON.parse(t),e.display()}})}},{key:"setCookie",value:function(){l("keyword",this.keywordV,{path:"/"}),location.href="http://localhost/list/list.html"}},{key:"display",value:function(){this.con.innerHTML='<dl>\n            <dt><img src="'+this.res.contribute[0].imgurl+'" alt=""></dt>\n            <dd><img src="'+this.res.contribute[1].imgurl+'" alt=""></dd>\n            <dd><img src="'+this.res.contribute[2].imgurl+'" alt=""></dd>\n            <dd><img src="'+this.res.contribute[3].imgurl+'" alt=""></dd>\n            <dd><img src="'+this.res.contribute[4].imgurl+'" alt=""></dd>\n            </dl>';for(var t="",e=0;e<this.res.hot.length;e++)t+='<li>\n                <a href="#">\n                <img src="'+this.res.hot[e].imgurl+'" alt="">\n                <p>'+this.res.hot[e].name+"</p>\n                </a>\n                <span>商城价：￥"+this.res.hot[e].price+"</span>\n                </li>";for(this.hot.innerHTML=t,t="",e=0;e<this.res.oneFr.length;e++)t+='<a href="#">\n                    <img src="'+this.res.oneFr[e].imgurl+'" alt="">\n                    <p>'+this.res.oneFr[e].name+"</p>\n                    <span>￥"+this.res.oneFr[e].price+"</span>\n                    </a>";for(this.onefr.innerHTML=t,t="",e=0;e<this.res.twoFr.length;e++)t+='<a href="#">\n                <img src="'+this.res.twoFr[e].imgurl+'" alt="">\n                <p>'+this.res.twoFr[e].name+"</p>\n                <span>￥"+this.res.twoFr[e].price+"</span>\n                </a>";for(this.twofr.innerHTML=t,t="",e=0;e<this.res.threeFr.length;e++)t+='<a href="#">\n                    <img src="'+this.res.threeFr[e].imgurl+'" alt="">\n                    <p>'+this.res.threeFr[e].name+"</p>\n                    <span>￥"+this.res.threeFr[e].price+"</span>\n                    </a>";for(this.threefr.innerHTML=t,t="",e=0;e<this.res.fourFr.length;e++)t+='<a href="#">\n                    <img src="'+this.res.fourFr[e].imgurl+'" alt="">\n                    <p>'+this.res.fourFr[e].name+"</p>\n                    <span>￥"+this.res.fourFr[e].price+"</span>\n                    </a>";this.fourfr.innerHTML=t}}]),e});